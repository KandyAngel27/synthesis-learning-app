<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synthesis - Master Knowledge in Minutes</title>
    <link rel="stylesheet" href="styles.css?v=1736300010">
    <link rel="stylesheet" href="random-workout-generator.css?v=1736300001">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="logo-animation">
            <svg width="80" height="80" viewBox="0 0 80 80">
                <circle cx="40" cy="40" r="35" stroke="#6366f1" stroke-width="2" fill="none" stroke-dasharray="220" stroke-dashoffset="220" class="circle-animate"/>
                <text x="40" y="48" text-anchor="middle" fill="#6366f1" font-size="32" font-weight="700" font-family="Inter">S</text>
            </svg>
        </div>
        <p class="loading-text">Initializing your learning journey...</p>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container" style="display: none;">
        
        <!-- Navigation Header -->
        <header class="main-header">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32">
                        <circle cx="16" cy="16" r="14" stroke="#6366f1" stroke-width="2" fill="none"/>
                        <text x="16" y="20" text-anchor="middle" fill="#6366f1" font-size="16" font-weight="700">S</text>
                    </svg>
                    <span>Synthesis</span>
                </div>
                <div class="header-actions">
                    <div class="xp-badge" id="header-xp-badge">
                        <span class="xp-level-icon" id="header-level-icon">&#127793;</span>
                        <span class="xp-level-text" id="header-level">Lv.1</span>
                    </div>
                    <div class="streak-badge">
                        <span class="flame-icon">&#128293;</span>
                        <span id="streak-count">0</span>
                    </div>
                    <button class="icon-btn" id="search-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                    <button class="icon-btn" id="profile-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            
            <!-- Home View -->
            <div id="home-view" class="view active">
                
                <!-- Hero Section -->
                <section class="hero-section">
                    <div class="hero-content">
                        <h1 class="hero-title">Good evening, Kandy &#128075;</h1>
                        <p class="hero-subtitle">Ready to expand your mind?</p>
                    </div>
                    <div class="daily-insight">
                        <div class="insight-header">
                            <span class="insight-badge">Today's Insight</span>
                            <span class="insight-time">5 min read</span>
                        </div>
                        <h3 class="insight-title">The Power of Tiny Habits</h3>
                        <p class="insight-excerpt">Discover how 1% improvements compound into remarkable results over time...</p>
                        <button class="btn-primary" id="daily-lesson-btn">Start Learning</button>
                    </div>
                </section>

                <!-- Daily Challenges Section -->
                <section class="challenges-section">
                    <div id="daily-challenges-container">
                        <!-- Dynamically populated by gamification.js -->
                    </div>
                </section>

                <!-- Quick Actions -->
                <section class="quick-actions-section">
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" onclick="app.switchView('flashcards')">
                            <span class="quick-action-icon">&#127183;</span>
                            <span class="quick-action-label">Flashcards</span>
                            <span class="quick-action-badge" id="flashcards-due-badge">0 due</span>
                        </button>
                        <button class="quick-action-btn" onclick="app.switchView('quick-quiz')">
                            <span class="quick-action-icon">&#9889;</span>
                            <span class="quick-action-label">Quick Quiz</span>
                        </button>
                        <button class="quick-action-btn" onclick="app.switchView('feynman')">
                            <span class="quick-action-icon">&#129504;</span>
                            <span class="quick-action-label">Feynman</span>
                        </button>
                        <button class="quick-action-btn" onclick="app.switchView('workout')">
                            <span class="quick-action-icon">&#128170;</span>
                            <span class="quick-action-label">Health Hub</span>
                        </button>
                    </div>
                </section>

                <!-- Favorite Books Shelf -->
                <section class="favorites-section">
                    <div class="section-header">
                        <h2>‚≠ê My Favorites</h2>
                        <button class="btn-text" onclick="app.manageFavorites()">Manage</button>
                    </div>
                    <div class="favorites-shelf" id="favorites-shelf">
                        <!-- Dynamically populated -->
                    </div>
                </section>

                <!-- Continue Learning -->
                <section class="continue-section">
                    <div class="section-header">
                        <h2>Continue Learning</h2>
                        <button class="btn-text">See all</button>
                    </div>
                    <div class="book-progress-list" id="continue-learning">
                        <!-- Dynamically populated -->
                    </div>
                </section>

                <!-- Categories Grid -->
                <section class="categories-section">
                    <div class="section-header">
                        <h2>Explore Categories</h2>
                    </div>
                    <div class="categories-grid" id="categories-grid">
                        <!-- Dynamically populated -->
                    </div>
                </section>

                <!-- Featured Books -->
                <section class="featured-section">
                    <div class="section-header">
                        <h2>Trending This Week</h2>
                    </div>
                    <div class="featured-books" id="featured-books">
                        <!-- Dynamically populated -->
                    </div>
                </section>

            </div>

            <!-- Category View -->
            <div id="category-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="category-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1 id="category-title">Psychology</h1>
                </div>
                <div class="category-books-grid" id="category-books">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Book Detail View -->
            <div id="book-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="book-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                </div>
                <div class="book-detail" id="book-detail">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Lesson View -->
            <div id="lesson-view" class="view">
                <div class="lesson-header">
                    <button class="btn-back" id="lesson-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <div class="lesson-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="lesson-progress-fill"></div>
                        </div>
                        <span class="progress-text" id="lesson-progress-text">Lesson 1 of 8</span>
                    </div>
                </div>
                <div class="lesson-content" id="lesson-content">
                    <!-- Dynamically populated -->
                </div>
                <div class="lesson-navigation" style="display: flex !important; gap: 1rem; justify-content: center; padding: 1.5rem;">
                    <button class="btn-secondary" id="prev-card-btn" style="min-width: 140px; display: block !important;">Previous</button>
                    <button class="btn-primary" id="next-card-btn" style="min-width: 140px; display: block !important; background: #6366f1; color: white; padding: 1rem 2rem; border-radius: 0.5rem; font-weight: 600;">Next</button>
                </div>
            </div>

            <!-- Profile View -->
            <div id="profile-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="profile-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>Your Progress</h1>
                </div>
                <div class="profile-content" id="profile-content">
                    <!-- Stats Overview -->
                    <div id="stats-overview">
                        <!-- Dynamically populated -->
                    </div>

                    <!-- Heat Map -->
                    <div id="heat-map-container">
                        <!-- Dynamically populated -->
                    </div>

                    <!-- Badges -->
                    <div id="badges-container">
                        <!-- Dynamically populated -->
                    </div>

                    <!-- Reset Section -->
                    <div class="reset-section" style="margin-top: 3rem; padding: 2rem; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 16px; border: 1px solid rgba(239, 68, 68, 0.3);">
                        <h3 style="color: #fca5a5; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                                <path d="M3 3v5h5"/>
                            </svg>
                            Reset App
                        </h3>
                        <p style="color: #94a3b8; margin-bottom: 1.5rem; font-size: 0.9rem;">
                            Start fresh! This will reset ALL progress including: XP, levels, streaks, completed lessons, badges, flashcards, workouts, and all saved data. Use this after updating content or to start over.
                        </p>
                        <button class="reset-btn" onclick="app.confirmReset()" style="
                            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
                            color: white;
                            border: none;
                            padding: 0.875rem 1.5rem;
                            border-radius: 12px;
                            font-weight: 600;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(220, 38, 38, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(220, 38, 38, 0.3)';">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                                <path d="M3 3v5h5"/>
                            </svg>
                            Full Reset - Start Fresh
                        </button>
                    </div>
                </div>
            </div>

            <!-- Vision Board View -->
            <div id="vision-board-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="vision-board-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>‚ú® Vision Board</h1>
                </div>
                <div class="vision-board-content" id="vision-board-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Manifestation Journal View -->
            <div id="manifestation-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="manifestation-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üåô Manifestation Journal</h1>
                </div>
                <div class="manifestation-content" id="manifestation-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Shadow Work View -->
            <div id="shadow-work-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="shadow-work-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üåë Shadow Work</h1>
                </div>
                <div class="shadow-work-content" id="shadow-work-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Workout Tracker View -->
            <div id="workout-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="workout-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üí™ Health Hub</h1>
                </div>
                <div class="workout-content" id="workout-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Flashcards View -->
            <div id="flashcards-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="flashcards-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üÉè Flashcards</h1>
                </div>
                <div class="flashcards-content" id="flashcards-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Quick Quiz View -->
            <div id="quick-quiz-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="quick-quiz-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>‚ö° Quick Quiz</h1>
                </div>
                <div class="quick-quiz-content" id="quick-quiz-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Feynman Technique View -->
            <div id="feynman-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="feynman-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üß† Feynman Technique</h1>
                </div>
                <div class="feynman-content" id="feynman-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Body Metrics View -->
            <div id="body-metrics-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="body-metrics-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üìä Body Metrics</h1>
                </div>
                <div class="body-metrics-content" id="body-metrics-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- TRT Protocol View -->
            <div id="trt-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="trt-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üíâ TRT Protocol</h1>
                </div>
                <div class="trt-content" id="trt-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Supplements View -->
            <div id="supplements-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="supplements-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>üíä Supplement Stack</h1>
                </div>
                <div class="supplements-content" id="supplements-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- Nutrition Planner View -->
            <div id="nutrition-view" class="view">
                <div class="view-header">
                    <button class="btn-back" id="nutrition-back-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <h1>ü•ó Nutrition Planner</h1>
                </div>
                <div class="nutrition-content" id="nutrition-content">
                    <!-- Dynamically populated -->
                </div>
            </div>

        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="home">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                </svg>
                <span>Home</span>
            </button>
            <button class="nav-item" data-view="vision-board">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                    <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
                <span>Vision</span>
            </button>
            <button class="nav-item" data-view="manifestation">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"></path>
                    <path d="M12 6v6l4 2"></path>
                </svg>
                <span>Journal</span>
            </button>
            <button class="nav-item" data-view="shadow-work">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 2a10 10 0 0 1 0 20"></path>
                </svg>
                <span>Shadow</span>
            </button>
            <button class="nav-item" data-view="workout">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14.4 14.4 9.6 9.6"></path>
                    <path d="M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z"></path>
                    <path d="m21.5 21.5-1.4-1.4"></path>
                    <path d="M3.9 3.9 2.5 2.5"></path>
                    <path d="M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z"></path>
                </svg>
                <span>Health</span>
            </button>
            <button class="nav-item" data-view="profile">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span>Profile</span>
            </button>
        </nav>

        <!-- Recipe Assistant Chat Widget -->
        <div id="recipe-assistant" class="recipe-assistant hidden">
            <div class="ra-header">
                <span class="ra-title">Recipe Assistant</span>
                <button class="ra-close" onclick="toggleRecipeAssistant()" title="Close">√ó</button>
            </div>
            <div class="ra-messages" id="ra-messages">
                <div class="ra-message assistant">
                    <p>Hi! I'm your Recipe Assistant. Search for recipes by ingredient!</p>
                    <p class="ra-hint">Try: chicken, beef, pasta, rice, salmon, shrimp, lamb, pork</p>
                    <p class="ra-hint" style="font-size: 0.75rem; opacity: 0.7;">(Uses TheMealDB - works best with common ingredients)</p>
                </div>
            </div>
            <div class="ra-input-area">
                <input type="text" id="ra-input" placeholder="Enter an ingredient..." onkeypress="if(event.key==='Enter')searchRecipes()">
                <button class="ra-send" onclick="searchRecipes()">Search</button>
            </div>
        </div>
        <button id="recipe-fab" class="recipe-fab" onclick="toggleRecipeAssistant()" title="Recipe Assistant">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 11h18M3 11v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-9M3 11V9a2 2 0 0 1 2-2h2l1-3h8l1 3h2a2 2 0 0 1 2 2v2"/>
                <circle cx="12" cy="16" r="2"/>
            </svg>
        </button>

    </div>

    <!-- Scripts -->
    <!-- External category modules must load BEFORE data.js -->
    <script src="medical-coding-data.js"></script>
    <script src="art-history-v2.js"></script>
    <script src="data.js?v=20260115"></script>
    <script src="premium-features.js"></script>
    <script src="gamification.js"></script>
    <script src="active-recall.js"></script>
    <script src="random-workout-generator.js?v=1736300001"></script>
    <script src="fitness-tracker.js?v=1736300010"></script>
    <script src="recipe-assistant.js"></script>
    <script src="app.js"></script>
</body>
</html>
